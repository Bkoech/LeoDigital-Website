!function(){for(var t=0,e=["webkit","moz"],a=0;a<e.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[e[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[a]+"CancelAnimationFrame"]||window[e[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,a){var o=(new Date).getTime(),i=Math.max(0,16-(o-t)),n=window.setTimeout(function(){e(o+i)},i);return t=o+i,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(t){"use strict";function e(){return v.$flag.is(":hidden")?v.$spacer.css({height:0}):(v.$footer.addClass("footer--fixed"),void v.$spacer.css({height:v.$footer.innerHeight()}))}function a(t){$.$header.toggleClass("header--sm",t>1)}function o(t){var e=t>=m.$hero.innerHeight()-$.$header.innerHeight(),a=Math.ceil(100/(m.$hero.innerHeight()-$.$header.innerHeight())*t),o=100-a;return m.$hero.toggleClass("hero--attach",e),$.$header.toggleClass("header--attach",e),$.$header.toggleClass("header--transparent",!e),$.$toggle.is(":visible")?(m.$overlay.removeAttr("style"),m.$text.removeAttr("style"),void m.$scrollButton.removeAttr("style")):(a>=20?m.$overlay.css({opacity:a/100}):m.$overlay.css({opacity:.2}),m.$scrollButton.css({}),m.$video.css({transform:"translate(-50%, -"+(50+a/1.6)+"%)"}),void m.$text.css({opacity:o/100,transform:"translateY("+a/1.2+"%)"}))}function i(e,a){function o(t){if(t.length){var o=e.find("[data-filter-list-item]"),i=t.attr("data-filter-list-item");o.removeClass("state-active"),t.addClass("state-active"),a.call({},i)}}e.on("click","[data-filter-list-item]",function(){o(t(this))}).data("filterList",{activateItem:o})}function n(){function e(t){var e="*"===t?"*":'[data-portfolio-grid-item*="'+t+'"]';w.$grid.isotope({filter:e})}var a=window.location.hash.split("!/filter/"),o=a.length>1?a.pop():!1,n=t("[data-filter-list]");w.$grid.isotope({itemSelector:"[data-portfolio-grid-item]",layoutMode:"fitRows"}),i(n,e),o&&(e(o),n.data("filterList").activateItem(n.find('a[href*="'+o+'"]')))}function r(){function e(){o.$item.each(function(){o.$container.innerHeight()<t(this).innerHeight()&&o.$container.css({height:t(this).innerHeight()+"px"})})}var a="state-active",o={$box:t("[data-toggle-box]")};o.$toggle=o.$box.find("[data-toggle-box-target]"),o.$item=o.$box.find("[data-toggle-box-id]"),o.$container=o.$box.find("[data-toggle-box-container]"),e(),o.$toggle.on("click",function(e){var i=t(this).attr("data-toggle-box-target"),n=o.$item.filter('[data-toggle-box-id="'+i+'"]');n.length&&(o.$toggle.removeClass(a),o.$item.removeClass(a),t(this).addClass(a),n.addClass(a),e.preventDefault())}),u.on("resize",function(){clearTimeout(this.resizeTimeoutId),this.resizeTimeoutId=setTimeout(e,250)})}function s(t){var e;return g||!t.length?(t.siblings("video").remove(),t.remove()):(e=t.get(0),t.attr("src",t.attr("data-src")),t.parents("[data-home-hero]").removeAttr("style"),e.loop=!0,e.preload="auto",e.play(),void t.on("playing",function(){t.show()}))}function l(){var t,e;p.$widget.length&&(t=p.$widget.offset().top+p.$widget.innerHeight(),e=p.$container.offset().top+p.$container.innerHeight()-30,"$clone"in p||(p.$clone=p.$widget.clone().appendTo(v.$before),p.$clone.addClass("is-cloned is-hidden")),p.$clone.toggleClass("is-hidden",e>t),p.$widget.toggleClass("is-hidden",t>=e))}function d(){g&&t(".hero").each(function(){t(this).css({height:"auto",minHeight:""}).css({height:t(this).innerHeight()+"px",minHeight:0})})}function c(){var t;!g&&y.$layer.length&&(t=Math.ceil(100/(y.$hero.offset().top+y.$hero.innerHeight())*u.scrollTop()),0>t&&(t=0),t>100&&(t=100),y.$layer.css({transform:"scale(1.2) translateY(-"+.075*t+"%)"}))}function h(){function e(t){o=o||t,requestAnimationFrame(e),o+2500>t||m.$video.is(":visible")||(i++,o=t,i===b.$src.length&&(i=0),a(b.$src.filter('[data-gallery-src="'+i+'"]').attr("data-src")))}function a(t){b.$gallery.css({backgroundImage:"url("+t+")"}).addClass("is-visible"),setTimeout(function(){m.$hero.css({backgroundImage:"url("+t+")"}),b.$gallery.removeClass("is-visible")},500)}var o,i=0;m.$video.is(":visible")?b.$gallery.hide():(b.$src.attr("src",function(){return t(this).attr("data-src")}),b.$gallery.addClass("is-visible")),requestAnimationFrame(e)}var g="ontouchstart"in document.documentElement,f=t("body"),u=(t("html"),t(window)),$=(t("[data-scroll-button]"),{$header:t("[data-header]")}),m={$hero:t("[data-home-hero]"),$text:t("[data-home-hero-text]"),$video:t("[data-home-hero-video]"),$overlay:t("[data-home-hero-overlay]"),$scrollButton:t("[data-home-hero-scroll-button]")},v={$footer:t("[data-footer]"),$before:t("[data-footer-before]"),$spacer:t("[data-footer-spacer]"),$flag:t("[data-footer-flag]")},w={$grid:t("[data-portfolio-grid]")},p={$widget:t("[data-share-widget]"),$container:t("[data-share-widget-container]")},y={$hero:t("[data-hero]")},b={$gallery:t("[data-gallery]")};$.$toggle=$.$header.find("[data-header-toggle]"),$.$logo=$.$header.find("[data-header-logo]"),y.$layer=y.$hero.find("[data-hero-layer]"),b.$src=b.$gallery.find("[data-gallery-src]"),g?f.addClass("touch"):f.addClass("no-touch"),n(),$.$toggle.on("click",function(t){f.toggleClass("header-active")}),r(),e(),s(t("video[data-src]")),t(window).load(d),h(),t("[data-scroll-button]").on("click",function(e){var a=t(this).attr("href"),o=t(a).offset().top;0===a.indexOf("#")&&("fixed"===$.$header.css("position")&&(o-=60),t("body, html").animate({scrollTop:o},600),e.preventDefault())}),u.on("load",function(){t("[data-lazy-load]").each(function(){var e=t(this).attr("data-lazy-load");e&&t(this).addClass(e)})}),u.on("resize",function(){clearTimeout(this.resizeTimeoutId),this.resizeTimeoutId=setTimeout(function(){e()},250)}),u.on("orientationchange",function(){clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout(function(){d()},250)}),u.on("scroll",function(t){requestAnimationFrame(function(e){e<t.timestSamp+100||(a(u.scrollTop()),m.$hero.length&&(o(u.scrollTop()),m.$scrollButton.addClass("state-inert")),l(),c())})}),setTimeout(function(){m.$scrollButton.addClass("state-active")},4e3)}(jQuery);